const Methods = {
	init() {
    Methods.libary();
    Methods.infinityScroll();
  },

  libary() {
    "function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(e){"use strict";"function"!=typeof e.fn.QD_infinityScroll&&(window._QuatroDigital_InfinityScroll=window._QuatroDigital_InfinityScroll||{allowNewPage:!0},e.fn.QD_infinityScroll=function(t){var o=window._QuatroDigital_InfinityScroll,i=function(e,t){if("object"==typeof console&&void 0!==console.error&&void 0!==console.info&&void 0!==console.warn){if("object"==typeof e&&"function"==typeof e.unshift){e.unshift("[Infinity Scroll]\n");var o=e}else o=["[Infinity Scroll]\n",e];if(void 0===t||"alerta"!==t.toLowerCase()&&"aviso"!==t.toLowerCase())if(void 0!==t&&"info"==t.toLowerCase())try{console.info.apply(console,o)}catch(e){try{console.info(o.join("\n"))}catch(e){}}else try{console.error.apply(console,o)}catch(e){try{console.error(o.join("\n"))}catch(e){}}else try{console.warn.apply(console,o)}catch(e){try{console.warn(o.join("\n"))}catch(e){}}}},n={lastShelf:">div:last",elemLoading:'\x3c!-- Infinity Scroll - Loading message --\x3e<div id="scrollLoading" class="qd-is-loading">Carregando ... </div>',searchUrl:null,returnToTop:e('<div id="returnToTop" class="qd-is-return-top"><a href="#"><span class="text">voltar ao</span><span class="text2">TOPO</span><span class="arrowToTop"></span></a></div>'),scrollBy:document,callback:function(){},getShelfHeight:function(e){return e.scrollTop()+e.height()},paginate:null,insertContent:function(e,t){e.after(t)},authorizeScroll:function(){return!0}},r=jQuery.extend({},n,t),a=jQuery(this);jQuery("");if(a.length<1)return a;a.length>1&&(i("Identifiquei que a seletor informado ("+a.selector+") retornou "+a.length+" elementos.\n Para solucionar o problema estou selecionando automáticamente o primeiro com o id: #"+(a.filter("[id^=ResultItems]:first").attr("id")||"!Not Found"),"Aviso"),a=a.filter("[id^=ResultItems]:first")),a.filter("[id^=ResultItems]").length||i(["Certifique-se que esta selecionando o elemento correto.\n O plugin espera que o elemento seja o que contém o id: #"+(e("div[id^=ResultItems]").attr("id")||"!Not Found"),e("div[id^=ResultItems]")],"Info"),a.parent().filter("[id^=ResultItems]").length&&(a=a.parent(),i(["Identifiquei que o seletor pai do elemento que você informou é o #"+(jQuery("div[id^=ResultItems]").attr("id")||"!Not Found")+".\n Como forma de corrigir esse problema de seleção de elemento, assumirei a prateleira correta.",a],"Aviso")),e("body").append(r.returnToTop);var l=e(window),s=e(document),c=e(r.scrollBy),u=e(r.elemLoading);o.toTopE=e(r.returnToTop),o.moreResults=!0,o.currentPage=2;return function(){var e=l.height();l.bind("resize.QD_infinityScroll",function(){e=l.height()});var t=0;c.bind("scroll.QD_infinityScroll",function(){clearTimeout(t),t=setTimeout(function(){s.scrollTop()>e?document.body.getAttribute("data-qd-infinity-scroll")||document.body.setAttribute("data-qd-infinity-scroll",1):document.body.getAttribute("data-qd-infinity-scroll")&&document.body.removeAttribute("data-qd-infinity-scroll")},20)}),o.buttonToTop=o.toTopE.find("a").bind("click.QD_infinityScroll",function(){return jQuery("html,body").animate({scrollTop:0},"slow"),!1})}(),function(){var t,n,s;o.searchUrl=null!==r.searchUrl?r.searchUrl:(n=/\/buscapagina\?.+&PageNumber=/i,s=/\/paginaprateleira\?.+PageNumber=/i,e("script:not([src])").each(function(){var e=this.innerHTML;return e.indexOf("buscapagina")>-1?(t=n.exec(e),!1):e.indexOf("paginaprateleira")>-1?(t=s.exec(e),!1):void 0}),"object"==typeof t&&void 0!==t[0]?t[0].replace("paginaprateleira","buscapagina"):(i("Não foi possível localizar a url de busca da página.\n Tente adicionar o .js ao final da página. \n[Método: getSearchUrl]"),"")),o.currentStatus=!0;var d=e(".pager[id*=PagerTop]:first").attr("id")||"";if(""!==d&&(o.pages=window["pagecount_"+d.split("_").pop()],void 0===o.pages))for(var f in window)if(/pagecount_[0-9]+/.test(f)){o.pages=window[f];break}void 0===o.pages&&(o.pages=9999999999999);var g=function(){o.allowNewPage&&e(window).trigger("QuatroDigital.is_getShelf")};if(e(window).on("QuatroDigital.is_getShelf",function(){if(o.currentStatus){var t=a.find(r.lastShelf);if(t.length<1)return i("Última Prateleira/Vitrine não encontrada \n ("+t.selector+")"),!1;t.after(u),o.currentStatus=!1;var n=o.currentPage;setTimeout(function(){e.ajax({url:o.searchUrl.replace(/pagenumber\=[0-9]*/i,"PageNumber="+o.currentPage),dataType:"html",success:function(a){a.trim().length<1?(o.moreResults=!1,i("Não existem mais resultados a partir da página: "+n,"Aviso"),t.after("<div id='scrollLoaded'>Todas as ofertas já foram exibidas</div>"),e(window).trigger("QuatroDigital.is_noMoreResults")):r.insertContent(t,a),o.currentStatus=!0,u.remove()},error:function(){i("Houve um erro na requisição Ajax de uma nova página.")},complete:function(t,o){r.callback(),e(window).trigger("QuatroDigital.is_Callback",[t,o])}}),o.currentPage++},2e3)}}),"function"==typeof r.paginate)r.paginate(function(){return!!(o.currentPage<=o.pages&&o.moreResults)&&(g(),!0)});else{var p=0;c.bind("scroll.QD_infinityScroll_paginate",function(){clearTimeout(p),p=setTimeout(function(){o.currentPage<=o.pages&&o.moreResults&&r.authorizeScroll()&&l.scrollTop()+l.height()>=r.getShelfHeight(a)&&g()},70)})}}(),e(window).trigger("QuatroDigital.is_ready"),o.ready=!0,a},e(document).ajaxSend(function(e,t,o){o.url.indexOf("PageNumber")>-1&&o.url.search(/PageNumber\=[^0-9]+/)>0&&t.abort()}),window.goToTopPage=function(){},e(function(){window.goToTopPage=function(){}}))}(jQuery);
  },
    
  infinityScroll() {
		$('.js--shelf[id*=ResultItems]').QD_infinityScroll();
  }
};

export default {
	init: Methods.init,
}